webpackJsonp([1],{100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(43),s=n(79),r=n.n(s),i=n(78);o.a.config.productionTip=!1,new o.a({el:"#app",router:i.a,template:"<App/>",components:{App:r.a}})},101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["user"],data:function(){return{filterKey:""}},watch:{filterKey:function(e){this.$emit("search",e)}}}},103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(49),s=n.n(o),r=n(108),i=n.n(r),a=n(186),c=n.n(a),l=n(188),u=n.n(l),d=n(191),p=n.n(d),h=n(190),m=n.n(h),g=n(157),f=n.n(g),b=n(183),v=n.n(b);t.default={data:function(){return{user:JSON.parse(sessionStorage.getItem("user")),users:[],filterKey:"",currentChatUser:null,stompClient:null,chats:new i.a,currentMessages:[]}},methods:{setFilterKey:function(e){this.filterKey=e},chatWithUser:function(e){console.log("home receive event: chatWithUser, userId: "+e.id),this.currentChatUser=e,this.chats.has(this.currentChatUser.id)||this.chats.set(this.currentChatUser.id,[]),this.currentMessages=this.chats.get(this.currentChatUser.id)},sendMsg:function(e){if(console.log("home receive event: sendMsg, content: "+e+", currentChatUser: "+this.currentChatUser),null!=this.currentChatUser){var t={type:"chat",from:this.user.id,to:this.currentChatUser.id,content:e,date:new Date+""};this.stompClient.send("/app/u/"+this.currentChatUser.id,{},s()(t)),this.chats.get(this.currentChatUser.id).push(t)}else alert("first choose a user to chat")}},mounted:function(){console.log("mounted");var e=this,t=new f.a("http://localhost:80/chat"),n="/u/"+this.user.id;e.stompClient=v.a.over(t),e.stompClient.connect({},function(t){e.stompClient.subscribe(n,function(t){var n=JSON.parse(t.body);e.chats.has(n.from)||e.chats.set(n.from,[]),e.chats.get(n.from).push(n)}),e.stompClient.subscribe("/sys/*",function(t){var n=JSON.parse(t.body);e.users=n.users}),e.stompClient.send("/app/sys/users",{},null)})},components:{Card:c.a,List:u.a,MsgEdit:p.a,Message:m.a}}},104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["currentChatUser","users","filterKey"],computed:{filteredUsers:function(){var e=this;return this.users.filter(function(t){return t.nickName.includes(e.filterKey)})}},methods:{chatWithUser:function(e){this.$emit("chatWithUser",e)}}}},105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(49),s=n.n(o),r=n(98);t.default={name:"hello",data:function(){return{nickName:""}},methods:{login:function(){var e=this;console.log("try to login with nickName: "+this.nickName),n.i(r.a)({nickName:this.nickName}).then(function(t){sessionStorage.setItem("user",s()(t.data)),console.log("login success"),e.$router.push("home")})}}}},106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["user","currentChatUser","messages"]}},107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{content:""}},methods:{sendMsg:function(){this.$emit("sendMsg",this.content),this.content=""}}}},146:function(e,t){},147:function(e,t){},148:function(e,t){},149:function(e,t){},150:function(e,t){},151:function(e,t){},152:function(e,t){},186:function(e,t,n){n(147);var o=n(12)(n(102),n(193),"data-v-2772b584",null);e.exports=o.exports},187:function(e,t,n){n(146);var o=n(12)(n(103),n(192),"data-v-0af5afd3",null);e.exports=o.exports},188:function(e,t,n){n(151);var o=n(12)(n(104),n(197),"data-v-78257412",null);e.exports=o.exports},189:function(e,t,n){n(150);var o=n(12)(n(105),n(196),"data-v-71a53125",null);e.exports=o.exports},190:function(e,t,n){n(149);var o=n(12)(n(106),n(195),"data-v-59a869c3",null);e.exports=o.exports},191:function(e,t,n){n(152);var o=n(12)(n(107),n(198),"data-v-8a1dce32",null);e.exports=o.exports},192:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"sidebar"},[n("Card",{attrs:{user:e.user},on:{search:e.setFilterKey}}),e._v(" "),n("List",{attrs:{currentChatUser:e.currentChatUser,users:e.users,filterKey:e.filterKey},on:{chatWithUser:e.chatWithUser}})],1),e._v(" "),n("div",{staticClass:"main"},[n("Message",{attrs:{user:e.user,currentChatUser:e.currentChatUser,messages:e.currentMessages}}),e._v(" "),n("MsgEdit",{on:{sendMsg:e.sendMsg}})],1)])},staticRenderFns:[]}},193:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card"},[n("header",[n("img",{staticClass:"avatar",attrs:{width:"40",height:"40",alt:e.user.nickName,src:"/static/images/"+e.user.img}}),e._v(" "),n("p",{staticClass:"name"},[e._v(e._s(e.user.nickName))])]),e._v(" "),n("footer",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.filterKey,expression:"filterKey"}],staticClass:"search",attrs:{type:"text",placeholder:"search user..."},domProps:{value:e.filterKey},on:{input:function(t){t.target.composing||(e.filterKey=t.target.value)}}})])])},staticRenderFns:[]}},194:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},195:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message"},[e.currentChatUser?n("ul",e._l(e.messages,function(t){return n("li",[n("p",{staticClass:"time"},[n("span",[e._v(e._s(t.date))])]),e._v(" "),n("div",{staticClass:"main",class:{self:t.from===e.user.id}},[n("img",{staticClass:"avatar",attrs:{width:"30",height:"30",src:"/static/images/"+(t.from===e.user.id?e.user.img:e.currentChatUser.img)}}),e._v(" "),n("div",{staticClass:"text"},[e._v(e._s(t.content))])])])})):e._e()])},staticRenderFns:[]}},196:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loginBox"},[n("table",[n("tr",[n("td",[e._v("NickName")]),e._v(" "),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.nickName,expression:"nickName"}],attrs:{type:"text",placeholder:"please input a nickName..."},domProps:{value:e.nickName},on:{input:function(t){t.target.composing||(e.nickName=t.target.value)}}})])]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"2"}},[n("button",{attrs:{type:"button"},on:{click:e.login}},[e._v("Login")]),e._v("\n          "+e._s(e.nickName)+"\n        ")])])])])},staticRenderFns:[]}},197:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list"},[n("ul",e._l(e.filteredUsers,function(t){return n("li",{class:{active:null!=e.currentChatUser&&t.id===e.currentChatUser.id},on:{click:function(n){e.chatWithUser(t)}}},[n("img",{staticClass:"avatar",attrs:{width:"30",height:"30",alt:t.nickName,src:"/static/images/"+t.img}}),e._v(" "),n("p",{staticClass:"name"},[e._v(e._s(t.nickName))])])}))])},staticRenderFns:[]}},198:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{placeholder:"按 Ctrl + Enter 发送"},domProps:{value:e.content},on:{keyup:[function(t){return("button"in t||!e._k(t.keyCode,"enter",13))&&t.ctrlKey?void e.sendMsg(t):null},function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.sendMsg(t)}],input:function(t){t.target.composing||(e.content=t.target.value)}}})])},staticRenderFns:[]}},205:function(e,t){e.exports={_args:[[{raw:"websocket@latest",scope:null,escapedName:"websocket",name:"websocket",rawSpec:"latest",spec:"latest",type:"tag"},"D:\\Tools\\VueJs\\vue\\vue-chat2\\node_modules\\stompjs"]],_from:"websocket@latest",_id:"websocket@1.0.24",_inCache:!0,_location:"/websocket",_nodeVersion:"7.3.0",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/websocket-1.0.24.tgz_1482977757939_0.1858439394272864"},_npmUser:{name:"theturtle32",email:"brian@worlize.com"},_npmVersion:"3.10.10",_phantomChildren:{},_requested:{raw:"websocket@latest",scope:null,escapedName:"websocket",name:"websocket",rawSpec:"latest",spec:"latest",type:"tag"},_requiredBy:["/stompjs"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.24.tgz",_shasum:"74903e75f2545b6b2e1de1425bc1c905917a1890",_shrinkwrap:null,_spec:"websocket@latest",_where:"D:\\Tools\\VueJs\\vue\\vue-chat2\\node_modules\\stompjs",author:{name:"Brian McKelvey",email:"brian@worlize.com",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},config:{verbose:!1},contributors:[{name:"Iñaki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.0.1"},directories:{lib:"./lib"},dist:{shasum:"74903e75f2545b6b2e1de1425bc1c905917a1890",tarball:"https://registry.npmjs.org/websocket/-/websocket-1.0.24.tgz"},engines:{node:">=0.8.0"},gitHead:"0e15f9445953927c39ce84a232cb7dd6e3adf12e",homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",maintainers:[{name:"theturtle32",email:"brian@worlize.com"}],name:"websocket",optionalDependencies:{},readme:"WebSocket Client & Server Implementation for Node\n=================================================\n\n[![npm version](https://badge.fury.io/js/websocket.svg)](http://badge.fury.io/js/websocket)\n\n[![NPM Downloads](https://img.shields.io/npm/dm/websocket.svg)](https://www.npmjs.com/package/websocket)\n\n[![NPM](https://nodei.co/npm/websocket.png?downloads=true&downloadRank=true&stars=true)](https://nodei.co/npm/websocket/)\n\n[![NPM](https://nodei.co/npm-dl/websocket.png?height=3)](https://nodei.co/npm/websocket/)\n\n[ ![Codeship Status for theturtle32/WebSocket-Node](https://codeship.com/projects/70458270-8ee7-0132-7756-0a0cf4fe8e66/status?branch=master)](https://codeship.com/projects/61106)\n\nOverview\n--------\nThis is a (mostly) pure JavaScript implementation of the WebSocket protocol versions 8 and 13 for Node.  There are some example client and server applications that implement various interoperability testing protocols in the \"test/scripts\" folder.\n\nFor a WebSocket client written in ActionScript 3, see my [AS3WebScocket](https://github.com/theturtle32/AS3WebSocket) project.\n\n\nDocumentation\n=============\n\n[You can read the full API documentation in the docs folder.](docs/index.md)\n\n\nChangelog\n---------\n\n***Current Version: 1.0.24*** — Released 2016-12-28\n\n***Version 1.0.24***\n\n* Fixed a bug when using native keepalive on Node >= 6.0. (Thanks, [@prossin](https://github.com/prossin))\n* Upgrading outdated dependencies\n\n***Version 1.0.23***\n\n* Official support for Node 6.x\n* Updating dependencies. Specifically, updating nan to ^2.3.3\n\n***Version 1.0.22***\n\n* Updating to work with nan 2.x\n\n\n***Version 1.0.21***\n\n* Incremented and re-published to work around an aborted npm publish of v1.0.20.\n\n***Version 1.0.20***\n\n* Added EventTarget to the W3CWebSocket interface (Thanks, [@ibc](https://github.com/ibc)!)\n* Corrected an inaccurate error message. (Thanks, [@lekoaf](https://github.com/lekoaf)!)\n\n***Version 1.0.19***\n\n* Updated to nan v1.8.x (tested with v1.8.4)\n* Added `\"license\": \"Apache-2.0\"` to package.json via [pull request #199](https://github.com/theturtle32/WebSocket-Node/pull/199) by [@pgilad](https://github.com/pgilad). See [npm1k.org](http://npm1k.org/).\n\n[View the full changelog](CHANGELOG.md)\n\nBrowser Support\n---------------\n\nAll current browsers are fully supported.\n\n* Firefox 7-9 (Old) (Protocol Version 8)\n* Firefox 10+ (Protocol Version 13)\n* Chrome 14,15 (Old) (Protocol Version 8)\n* Chrome 16+ (Protocol Version 13)\n* Internet Explorer 10+ (Protocol Version 13)\n* Safari 6+ (Protocol Version 13)\n\n***Safari older than 6.0 is not supported since it uses a very old draft of WebSockets***\n\n***If you need to simultaneously support legacy browser versions that had implemented draft-75/draft-76/draft-00, take a look here: https://gist.github.com/1428579***\n\nBenchmarks\n----------\nThere are some basic benchmarking sections in the Autobahn test suite.  I've put up a [benchmark page](http://theturtle32.github.com/WebSocket-Node/benchmarks/) that shows the results from the Autobahn tests run against AutobahnServer 0.4.10, WebSocket-Node 1.0.2, WebSocket-Node 1.0.4, and ws 0.3.4.\n\nAutobahn Tests\n--------------\nThe very complete [Autobahn Test Suite](http://autobahn.ws/testsuite/) is used by most WebSocket implementations to test spec compliance and interoperability.\n\n- [View Server Test Results](http://theturtle32.github.com/WebSocket-Node/test-report/servers/)\n- [View Client Test Results](http://theturtle32.github.com/WebSocket-Node/test-report/clients/)\n\nNotes\n-----\nThis library has been used in production on [worlize.com](https://www.worlize.com) since April 2011 and seems to be stable.  Your mileage may vary.\n\n**Tested with the following node versions:**\n\n- 6.2.0\n- 5.11.1\n- 4.4.4\n- 0.10.45\n\nIt may work in earlier or later versions but I'm not actively testing it outside of the listed versions.  YMMV.\n\nInstallation\n------------\n\nA few users have reported difficulties building the native extensions without first manually installing node-gyp.  If you have trouble building the native extensions, make sure you've got a C++ compiler, and have done `npm install -g node-gyp` first. \n\nNative extensions are optional, however, and WebSocket-Node will work even if the extensions cannot be compiled.\n\nIn your project root:\n\n    $ npm install websocket\n  \nThen in your code:\n\n```javascript\nvar WebSocketServer = require('websocket').server;\nvar WebSocketClient = require('websocket').client;\nvar WebSocketFrame  = require('websocket').frame;\nvar WebSocketRouter = require('websocket').router;\nvar W3CWebSocket = require('websocket').w3cwebsocket;\n```\n\nNote for Windows Users\n----------------------\nBecause there is a small C++ component used for validating UTF-8 data, you will need to install a few other software packages in addition to Node to be able to build this module:\n\n- [Microsoft Visual C++](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express)\n- [Python 2.7](http://www.python.org/download/) (NOT Python 3.x)\n\n\nCurrent Features:\n-----------------\n- Licensed under the Apache License, Version 2.0\n- Protocol version \"8\" and \"13\" (Draft-08 through the final RFC) framing and handshake\n- Can handle/aggregate received fragmented messages\n- Can fragment outgoing messages\n- Router to mount multiple applications to various path and protocol combinations\n- TLS supported for outbound connections via WebSocketClient\n- TLS supported for server connections (use https.createServer instead of http.createServer)\n  - Thanks to [pors](https://github.com/pors) for confirming this!\n- Cookie setting and parsing\n- Tunable settings\n  - Max Receivable Frame Size\n  - Max Aggregate ReceivedMessage Size\n  - Whether to fragment outgoing messages\n  - Fragmentation chunk size for outgoing messages\n  - Whether to automatically send ping frames for the purposes of keepalive\n  - Keep-alive ping interval\n  - Whether or not to automatically assemble received fragments (allows application to handle individual fragments directly)\n  - How long to wait after sending a close frame for acknowledgment before closing the socket.\n- [W3C WebSocket API](http://www.w3.org/TR/websockets/) for applications running on both Node and browsers (via the `W3CWebSocket` class). \n\n\nKnown Issues/Missing Features:\n------------------------------\n- No API for user-provided protocol extensions.\n\n\nUsage Examples\n==============\n\nServer Example\n--------------\n\nHere's a short example showing a server that echos back anything sent to it, whether utf-8 or binary.\n\n```javascript\n#!/usr/bin/env node\nvar WebSocketServer = require('websocket').server;\nvar http = require('http');\n\nvar server = http.createServer(function(request, response) {\n    console.log((new Date()) + ' Received request for ' + request.url);\n    response.writeHead(404);\n    response.end();\n});\nserver.listen(8080, function() {\n    console.log((new Date()) + ' Server is listening on port 8080');\n});\n\nwsServer = new WebSocketServer({\n    httpServer: server,\n    // You should not use autoAcceptConnections for production\n    // applications, as it defeats all standard cross-origin protection\n    // facilities built into the protocol and the browser.  You should\n    // *always* verify the connection's origin and decide whether or not\n    // to accept it.\n    autoAcceptConnections: false\n});\n\nfunction originIsAllowed(origin) {\n  // put logic here to detect whether the specified origin is allowed.\n  return true;\n}\n\nwsServer.on('request', function(request) {\n    if (!originIsAllowed(request.origin)) {\n      // Make sure we only accept requests from an allowed origin\n      request.reject();\n      console.log((new Date()) + ' Connection from origin ' + request.origin + ' rejected.');\n      return;\n    }\n    \n    var connection = request.accept('echo-protocol', request.origin);\n    console.log((new Date()) + ' Connection accepted.');\n    connection.on('message', function(message) {\n        if (message.type === 'utf8') {\n            console.log('Received Message: ' + message.utf8Data);\n            connection.sendUTF(message.utf8Data);\n        }\n        else if (message.type === 'binary') {\n            console.log('Received Binary Message of ' + message.binaryData.length + ' bytes');\n            connection.sendBytes(message.binaryData);\n        }\n    });\n    connection.on('close', function(reasonCode, description) {\n        console.log((new Date()) + ' Peer ' + connection.remoteAddress + ' disconnected.');\n    });\n});\n```\n\nClient Example\n--------------\n\nThis is a simple example client that will print out any utf-8 messages it receives on the console, and periodically sends a random number.\n\n*This code demonstrates a client in Node.js, not in the browser*\n\n```javascript\n#!/usr/bin/env node\nvar WebSocketClient = require('websocket').client;\n\nvar client = new WebSocketClient();\n\nclient.on('connectFailed', function(error) {\n    console.log('Connect Error: ' + error.toString());\n});\n\nclient.on('connect', function(connection) {\n    console.log('WebSocket Client Connected');\n    connection.on('error', function(error) {\n        console.log(\"Connection Error: \" + error.toString());\n    });\n    connection.on('close', function() {\n        console.log('echo-protocol Connection Closed');\n    });\n    connection.on('message', function(message) {\n        if (message.type === 'utf8') {\n            console.log(\"Received: '\" + message.utf8Data + \"'\");\n        }\n    });\n    \n    function sendNumber() {\n        if (connection.connected) {\n            var number = Math.round(Math.random() * 0xFFFFFF);\n            connection.sendUTF(number.toString());\n            setTimeout(sendNumber, 1000);\n        }\n    }\n    sendNumber();\n});\n\nclient.connect('ws://localhost:8080/', 'echo-protocol');\n```\n\nClient Example using the *W3C WebSocket API*\n--------------------------------------------\n\nSame example as above but using the [W3C WebSocket API](http://www.w3.org/TR/websockets/).\n\n```javascript\nvar W3CWebSocket = require('websocket').w3cwebsocket;\n\nvar client = new W3CWebSocket('ws://localhost:8080/', 'echo-protocol');\n\nclient.onerror = function() {\n    console.log('Connection Error');\n};\n\nclient.onopen = function() {\n    console.log('WebSocket Client Connected');\n\n    function sendNumber() {\n        if (client.readyState === client.OPEN) {\n            var number = Math.round(Math.random() * 0xFFFFFF);\n            client.send(number.toString());\n            setTimeout(sendNumber, 1000);\n        }\n    }\n    sendNumber();\n};\n\nclient.onclose = function() {\n    console.log('echo-protocol Client Closed');\n};\n\nclient.onmessage = function(e) {\n    if (typeof e.data === 'string') {\n        console.log(\"Received: '\" + e.data + \"'\");\n    }\n};\n```\n    \nRequest Router Example\n----------------------\n\nFor an example of using the request router, see `libwebsockets-test-server.js` in the `test` folder.\n\n\nResources\n---------\n\nA presentation on the state of the WebSockets protocol that I gave on July 23, 2011 at the LA Hacker News meetup.  [WebSockets: The Real-Time Web, Delivered](http://www.scribd.com/doc/60898569/WebSockets-The-Real-Time-Web-Delivered)\n",readmeFilename:"README.md",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.24"}},78:function(e,t,n){"use strict";var o=n(43),s=n(199),r=n(189),i=n.n(r),a=n(187),c=n.n(a);o.a.use(s.a),t.a=new s.a({routes:[{path:"/",name:"Login",component:i.a},{path:"/home",name:"home",component:c.a}]})},79:function(e,t,n){n(148);var o=n(12)(n(101),n(194),null,null);e.exports=o.exports},98:function(e,t,n){"use strict";var o=n(99);t.a=o.a},99:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(80),s=n.n(o),r=function(e){return s.a.get("http://localhost:80/login",{params:e})}}},[100]);
//# sourceMappingURL=app.56c4623ee87baa79686d.js.map